<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dental Link Survey</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        /* -------------------- BACKGROUND -------------------- */
        .bg-overlay {
            position: fixed;
            inset: 0;
            z-index: -1;
            background-color: #020617;
            background-image:
                linear-gradient(rgba(0,0,0,0.05), rgba(0,0,0,0.05)),
                url("https://i.ibb.co/DftXbdBR/7a01717e6993a6b0831ff71d2b933d48.jpg");
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center center;
            -webkit-background-size: cover;
        }

        .bg-overlay::after {
            content: "";
            position: absolute;
            inset: 0;
            background-image: url("https://st.depositphotos.com/1238677/2741/i/950/depositphotos_27417835-stock-photo-teeth-implants-and-dental-instruments.jpg");
            opacity: 0.02;
            pointer-events: none;
        }

        /* -------------------- BODY -------------------- */
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, sans-serif;
            direction: rtl;
            overflow-x: hidden;
        }

        /* -------------------- CARD -------------------- */
        .card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 40px 30px;
            width: 288px;
            max-width: 90%;
            text-align: center;
            color: white;
            box-shadow: 0 20px 45px rgba(0,0,0,0.4); 
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: transform 0.4s ease;
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* -------------------- ICON -------------------- */
        .icon {
            font-size: 65px;
            margin-bottom: 20px;
            animation: float 2s ease-in-out infinite;
            display: inline-block;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        /* -------------------- BUTTONS -------------------- */
        button {
            background: linear-gradient(90deg, #0c4a6e, #0ea5e9);
            color: #ffffff;
            border: none;
            padding: 16px 30px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            width: 100%;
            margin-bottom: 10px;
            box-shadow: 0 8px 20px rgba(14,165,233,0.3);
            transition: all 0.1s ease;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* -------------------- OPTIONS BUTTONS -------------------- */
        .opt-btn {
            background: rgba(255, 255, 255, 0.1) !important;
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
            color: white !important;
            margin: 10px 0 !important;
            box-shadow: none !important;
        }

        /* ููุงุณ ุฌุฏูุฏ ููุฎูุงุฑ ุงููุญุฏุฏ */
        .opt-btn.selected {
            background: #0ea5e9 !important;
            border-color: #7dd3fc !important;
            box-shadow: 0 0 15px rgba(14, 165, 233, 0.8) !important;
            transform: scale(0.96);
        }

        .other-btn {
            background: linear-gradient(90deg, #94a3b8, #cbd5e1) !important;
            color: #1e293b !important;
            border: none !important;
            font-weight: 800 !important;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.2) !important;
        }

        /* -------------------- INPUT & SELECT FIELD -------------------- */
        .custom-input {
            width: 100%;
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(14, 165, 233, 0.5);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1rem;
            margin-bottom: 15px;
            outline: none;
            box-sizing: border-box;
            text-align: center;
            transition: border-color 0.3s ease;
        }

        select.custom-input {
            appearance: none;
            cursor: pointer;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: left 15px center;
            background-size: 15px;
        }

        select option {
            background: #0f172a;
            color: white;
        }

        .custom-input:focus {
            border-color: #0ea5e9;
        }

        /* -------------------- SOCIAL LINKS -------------------- */
        .social-links {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
        }

        .social-btn {
            width: 55px;
            height: 55px;
            border-radius: 12px !important;
            color: white !important;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease;
            font-size: 0;
        }

        .social-btn i {
            font-size: 1.6rem !important;
        }

        .social-btn:active {
            transform: scale(0.92);
        }

        .whatsapp {
            background: #25D366 !important;
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.2);
        }

        .instagram {
            background: radial-gradient(circle at 30% 107%, #fdf497 0%, #fdf497 5%, #fd5949 45%, #d6249f 60%, #285AEB 90%) !important;
            box-shadow: 0 4px 12px rgba(214, 36, 159, 0.2);
        }

        /* -------------------- TEXT -------------------- */
        h1 {
            font-size: 1.6rem;
            margin-bottom: 12px;
        }

        p {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .developer {
            font-size: 13px;
            color: #0c4a6e !important;
            margin-top: 20px;
            font-weight: bold;
        }

        .back-link {
            background: none;
            text-decoration: underline;
            color: #bae6fd;
            box-shadow: none;
            font-size: 0.9rem;
            border: none;
            cursor: pointer;
        }

        /* -------------------- CONFIRM BUTTONS - FINISH SCREEN -------------------- */
        #confirm-area div {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        #confirm-area button {
            width: 110px;
            padding: 10px 0;
            font-size: 0.9rem;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ุฒุฑ ุงูุชุฃููุฏ ุงูุฌุฏูุฏ ููุฃุณุฆูุฉ */
        .confirm-choices-btn {
            background: linear-gradient(90deg, #059669, #10b981) !important;
            margin-top: 15px !important;
        }
    </style>
</head>
<body ontouchstart="">

    <div class="bg-overlay"></div>

    <div class="container">

        <div id="welcome-screen" class="card">
            <div class="icon">๐ฆท</div>
            <h1>Solving Patients' Problem</h1>
            <p>ุงุณุชุจูุงู ูุญู ูุดููุฉ ุงูุทูุงุจ ุจุงูุฌุงุฏ ุงููุฑุถู</p>
            <button onclick="startSurvey()">ุงุจุฏุฃ ุงูุงุณุชุทูุงุน</button>
            <div class="developer">Developed by: Omar Mohammed Monther Altali</div>
        </div>

        <div id="university-screen" class="card" style="display: none;">
            <div class="icon">๐๏ธ</div>
            <h2>ุงูุจูุงูุงุช ุงูุฃูุงุฏูููุฉ</h2>
            <p>ุงุฎุชุฑ ุงููุญุงูุธุฉ ูุงูุฌุงูุนุฉ ูููุชุงุจุนุฉ</p>
            
            <select id="province-select" class="custom-input" onchange="updateUniversities()">
                <option value="">ุงุฎุชุฑ ุงููุญุงูุธุฉ</option>
                <option value="damascus">ุฏูุดู ูุฑูููุง</option>
                <option value="aleppo">ุญูุจ</option>
                <option value="homs">ุญูุต</option>
                <option value="hama">ุญูุงุฉ</option>
                <option value="latakia">ุงููุงุฐููุฉ</option>
                <option value="tartus">ุทุฑุทูุณ</option>
                <option value="daraa">ุฏุฑุนุง</option>
                <option value="deir_ezzor">ุฏูุฑ ุงูุฒูุฑ</option>
                <option value="idlib">ุฅุฏูุจ</option>
            </select>

            <select id="university-select" class="custom-input">
                <option value="">ุงุฎุชุฑ ุงูุฌุงูุนุฉ</option>
            </select>

            <button onclick="submitAcademicData()" style="margin-top: 20px;">ูุชุงุจุนุฉ</button>
            <button class="back-link" onclick="resetSurvey()">ุฑุฌูุน</button>
        </div>

        <div id="question-screen" class="card" style="display: none;">
            <h2 id="question-number">ุงูุณุคุงู ุงูุฃูู</h2>
            <p id="question-text">ุฌุงุฑู ุงูุชุญููู...</p>
            <p style="font-size: 0.8rem; color: #bae6fd;">(ููููู ุงุฎุชูุงุฑ ุฃูุซุฑ ูู ุฅุฌุงุจุฉ)</p>
            <div id="options-container" class="options"></div>
            <button id="confirm-next-btn" class="confirm-choices-btn" onclick="confirmAnswers()" style="display:none;">ุชุฃููุฏ ุงูุฅุฌุงุจุงุช</button>
            <button class="back-link" onclick="goBack()">ุงูุณุงุจู</button>
        </div>

        <div id="suggestions-screen" class="card" style="display: none;">
            <div class="icon">๐ก</div>
            <h2>ุงูุชุฑุงุญุงุชูู</h2>
            <p>ูู ูุฏูู ุฃู ููุงุญุธุงุช ุฅุถุงููุฉุ</p>
            <textarea id="user-suggestion" class="custom-input" style="height: 100px; width: 100%; color:white; background:rgba(0,0,0,0.2); border-radius:10px; padding:10px; resize: none;"></textarea>
            
            <button onclick="showFinishScreen()" style="margin-top: 15px;">ุงูุชูุงู ููุฎุทูุฉ ุงูุฃุฎูุฑุฉ</button> 
            <button class="back-link" onclick="goBackFromSuggestions()">ุฑุฌูุน</button>
        </div>

        <div id="finish-screen" class="card" style="display: none;">
            <div class="icon">๐ค</div>
            <h2>ุดูุฑุงู ูู!</h2>
            <p>ููุฏ ุฃุชููุช ุงูุงุณุชุจูุงู ุจูุฌุงุญ.</p>
            <p style="font-weight: bold; margin-top: 15px; color: #bae6fd;">"ูุฏุงู ุจูุฏ ูููู ุนูู ุญู ูุดุงูููู"</p>
            
            <div id="initial-save-area">
                <button onclick="showConfirm()" style="margin-top: 20px; background: linear-gradient(90deg, #059669, #10b981);">
                    ุญูุธ ุงููุนูููุงุช ุงูุชู ุฃุฏุฎูุชูุง
                </button>
            </div>

            <div id="confirm-area" style="display: none; margin-top: 20px;">
                <p style="color: #bae6fd; font-weight: bold; margin-bottom: 15px;">
                    ูู ุฃูุช ูุชุฃูุฏ ูู ุญูุธ ุงูุฅุฌุงุจุงุชุ
                </p>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button onclick="saveData()" style="background: #10b981; margin-bottom: 0;">ูุนู</button>
                    <button onclick="hideConfirm()" style="background: #ef4444; margin-bottom: 0;">ูุง</button>
                </div>
            </div>

            <p style="margin-top: 30px; font-size: 0.9rem; opacity: 0.8;">ุชูุงุตู ูุนู:</p>
            <div class="social-links">
                <a href="https://wa.me/963968558454" target="_blank" class="social-btn whatsapp">
                    <i class="fab fa-whatsapp"></i>
                </a>
                <a href="https://instagram.com/3omaraltali" target="_blank" class="social-btn instagram">
                    <i class="fab fa-instagram"></i>
                </a>
            </div>
        </div>

    </div>

    <script>
        const universityData = {
            "damascus": ["ุฌุงูุนุฉ ุฏูุดู", "ุงูุฌุงูุนุฉ ุงูุณูุฑูุฉ ุงูุฎุงุตุฉ (SPU)", "ุงูุฌุงูุนุฉ ุงูุนุฑุจูุฉ ุงูุฏูููุฉ (AIU)", "ุงูุฌุงูุนุฉ ุงูุฏูููุฉ ุงูุฎุงุตุฉ ููุนููู ูุงูุชูููููุฌูุง (IUST)", "ุฌุงูุนุฉ ุงูููููู ุงูุฎุงุตุฉ", "ุฌุงูุนุฉ ุงูุดุงู ุงูุฎุงุตุฉ", "ุฌุงูุนุฉ ูุงุณููู ุงูุฎุงุตุฉ", "ุฌุงูุนุฉ ุงูุฑุดูุฏ ุงูุฏูููุฉ ุงูุฎุงุตุฉ", "ุฌุงูุนุฉ ุฃูุทุงููุฉ ุงูุณูุฑูุฉ"],
            "aleppo": ["ุฌุงูุนุฉ ุญูุจ", "ุฌุงูุนุฉ ุฅูุจูุง ุงูุฎุงุตุฉ", "ุฌุงูุนุฉ ุงูุดูุจุงุก ุงูุฎุงุตุฉ", "ุฌุงูุนุฉ ูุฑุทุจุฉ ุงูุฎุงุตุฉ"],
            "homs": ["ุฌุงูุนุฉ ุงูุจุนุซ", "ุฌุงูุนุฉ ุงูุญูุงุด ุงูุฎุงุตุฉ", "ุฌุงูุนุฉ ุงููุงุฏู ุงูุฏูููุฉ"],
            "hama": ["ุฌุงูุนุฉ ุญูุงุฉ", "ุงูุฌุงูุนุฉ ุงููุทููุฉ ุงูุฎุงุตุฉ", "ุงูุฌุงูุนุฉ ุงูุนุฑุจูุฉ ุงูุฎุงุตุฉ ููุนููู ูุงูุชูููููุฌูุง"],
            "latakia": ["ุฌุงูุนุฉ ุชุดุฑูู", "ุฌุงูุนุฉ ุงูููุงุฑุฉ ุงูุฎุงุตุฉ", "ุฌุงูุนุฉ ุงูุดุงู ุงูุฎุงุตุฉ (ูุฑุน ุงููุงุฐููุฉ)"],
            "tartus": ["ุฌุงูุนุฉ ุทุฑุทูุณ", "ุฌุงูุนุฉ ุงูุฃูุฏูุณ ููุนููู ุงูุทุจูุฉ"],
            "daraa": ["ุฌุงูุนุฉ ุงููุฑููู ุงูุฎุงุตุฉ"],
            "deir_ezzor": ["ุฌุงูุนุฉ ุงููุฑุงุช", "ุฌุงูุนุฉ ุงูุฌุฒูุฑุฉ ุงูุฎุงุตุฉ"],
            "idlib": ["ุฌุงูุนุฉ ุฅุฏูุจ", "ุฌุงูุนุฉ ูุงุฑู ุงูุฎุงุตุฉ", "ุฌุงูุนุฉ ุงูุดูุงู ุงูุฎุงุตุฉ", "ุฌุงูุนุฉ ุงููุนุงุฑู"]
        };

        const questions = [
            { text: "ูุง ูู ุงูุงุณุชูุฒุงู ุงูุฒููู ุงููุณุทู ุงูุฐู ุชูุถูู ูู ุงูุจุญุซ ูุงูุชูุณูู ูุชุฃููู ุญุงูุฉ ูุงุญุฏุฉุ", options: ["ููู", "ููููู", "ุฃูุซุฑ ูู ุซูุงุซุฉ ุฃูุงู", "ุฃุนุชูุฏ ุนูู ุงูุตุฏูุฉ"] },
            { text: "ุฃู ุทุฑููุฉ ุชุฌุฏูุง ูุนุงูุฉ ููุถูููุฉ ูุฅูุฌุงุฏ ุงูุญุงูุฉ ุงูุชู ุชุฑูุฏูุงุ", options: ["ูุฌููุนุงุช ุงูููุณุจูู", "ุญุงูุงุช ุงููุงุชุณุงุจ", "ุณูุงุณุฑุฉ ุงููุฑุถู", "ุณุคุงู ุงูุฃูุงุฑุจ"] },
            { text: "ูุง ูู ุงููุนูููุฉ ุงูููููุฏุฉ ุงูุชู ูู ุนุฑูุชูุง ุนู ุงููุฑูุถ ูุณุจูุงู ููููุฑุช ููุช ูุฌูุฏุ", options: ["ุตูุฑ ุณุฑูุฑูุฉ ุฃู ุดุนุงุนูุฉ ุฃูููุฉ", "ููุงู ุงูุณูู ุจุฏูุฉ", "ุชุงุฑูุฎ ุงูุชุฒุงูู ูุน ุทูุงุจ ุณุงุจููู", "ูุฏุฑุชู ุงููุงุฏูุฉ"] },
            { text: "ูู ุญุงู ุชุนุงููุช ูุน ูุฑูุถ ูู ุงูุณูุดูุงู ููุฏูุงุ ูุง ูู ุฃูุจุฑ ุชุฎูู ูุฑุงูุฏู ุญุชู ูุญุธุฉ ุฏุฎููู ุงูุนูุงุฏุฉุ", options: ["ุนุฏู ุตุฏู ูุตูู ููุญุงูุฉ", "ุฅุบูุงู ูุงุชูู ูุชุฌุงูู ุงูููุนุฏ", "ุทูุจู ููุจุงูุบ ูุงููุฉ ููุงุจู ุงูุญุถูุฑ"] },
            { text: "ุจุฑุฃููุ ูุง ูู ุงูุนุงุฆู ุงูููุฌุณุชู ุงูุฃูู ุงูุฐู ูุฌุนู ุงููุฑูุถ ูุชุฑุฏุฏ ูู ุงููุฏูู ูุนูุงุฏุงุช ุงูุฌุงูุนุฉุ", options: ["ุจูุนุฏ ุงููุณุงูุฉ ูุตุนูุจุฉ ุงูููุงุตูุงุช", "ุชุถุงุฑุจ ุฃููุงุช ุงูุนูุงุฏุฉ ูุน ุนููู", "ุทูู ูุฏุฉ ุงูุงูุชุธุงุฑ ูุงูุฌูุณุงุช"] },
            { text: "ูู ููุฌุฏ ูุธุงู ููุงุถูุฉ ูุฑุจุทู ุจุงููุฑุถูุ ูุง ูู ุงูููุฒุฉ ุงูุชู ุณุชุฌุนูู ุชุนุชูุฏู ูุฎูุงุฑ ุฃููุ", options: ["ุถูุงู ุงูุชุฒุงู ุงููุฑูุถ", "ุฏูุฉ ุชุดุฎูุต ุงูุญุงูุฉ ูุจู ุงูููุงุก", "ุงูุนุซูุฑ ุนูู ุงูุญุงูุฉ ุงูุชู ุชุฑูุฏูุง"] },
            { text: "ูู ุชุจูุบ ุงูุชูููุฉ ุงููุงุฏูุฉ ุงูุชูุฑูุจูุฉ (ุญูุงูุฒุ ููุงุตูุงุชุ ุถูุงุน ููุช) ุงูุชู ุชุฏูุนูุง ูุชุฃููู ุญุงูุฉ ุชุฎุตุตูุฉ ุตุนุจุฉุ", options: ["ูุจูุบ ุจุณูุท", "ูุจูุบ ูุชูุณุท", "ูุจูุบ ูุจูุฑ", "ูุง ุฃุฏูุน ุฃุจุฏุงู"] },
            { text: "ูุง ูู ุดุนูุฑู ุชุฌุงู ุชูุฑุงุฑ ุงูููุดูุฑุงุช ูุทูุจ ุงูุญุงูุงุช ุนูู ุงููุฌููุนุงุช ุงูุนุงูุฉ ุญุงููุงูุ", options: ["ุชุดุชุช ูุจูุฑ ูุถูุงุน ููุช", "ูุณููุฉ ุจุฏุงุฆูุฉ ููููุง ุงููุญูุฏุฉ", "ุฃุญุชุงุฌ ูุณููุฉ ุฃูุซุฑ ุชูุธููุงู ูุฎุตูุตูุฉ"] },
            { text: "ูู ุฃุชูุญุช ูู ูุฑุตุฉ ุชูููู ุชุฌุฑุจุฉ ุงููุฑูุถ ุจุนุฏ ุงูุชูุงุก ุงูุญุงูุฉุ ูุง ูู ุงููุนูุงุฑ ุงูุฃูู ูู ุชูููููุ", options: ["ุงูุงูุชุฒุงู ุจุงูููุงุนูุฏ", "ุงูุชุนุงูู ุฃุซูุงุก ุงูุนูุงุฌ", "ุงูุตุฏู ูู ุงููุนูููุงุช ุงูุดุฎุตูุฉ"] },
            { text: "ุจุนูุฏุงู ุนู ุงูุญุธุ ูุง ูู ุงูุฃุฏุงุฉ ุงูููููุฏุฉ ุงูุชู ุชููุต ุทุงูุจ ุทุจ ุงูุฃุณูุงู ููุตุจุญ ุชุฃููู ุงูุญุงูุงุช ุนูููุฉ ุฃูุชููุงุชูููุฉุ", options: ["ุชุทุจูู ูุฎุตุต ูููุธู", "ูุงุนุฏุฉ ุจูุงูุงุช ูุฑุถู ููุซููุฉ", "ูุธุงู ุญุฌุฒ ููุงุนูุฏ ุฏููู"] }
        ];

        let currentStep = 0;
        let userAnswers = {}; 
        let currentSelectedOptions = []; // ูุชุฎุฒูู ุงูุฎูุงุฑุงุช ุงููุฎุชุงุฑุฉ ููุณุคุงู ุงูุญุงูู

        window.startSurvey = function() {
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('university-screen').style.display = 'block';
        };

        window.updateUniversities = function() {
            const province = document.getElementById('province-select').value;
            const uniSelect = document.getElementById('university-select');
            uniSelect.innerHTML = '<option value="">ุงุฎุชุฑ ุงูุฌุงูุนุฉ</option>';
            if (province && universityData[province]) {
                universityData[province].forEach(uni => {
                    const option = document.createElement('option');
                    option.value = uni;
                    option.text = uni;
                    uniSelect.appendChild(option);
                });
            }
        };

        window.submitAcademicData = function() {
            const provinceSelect = document.getElementById('province-select');
            const university = document.getElementById('university-select').value;
            if (provinceSelect.value === "" || university === "") {
                alert("ูุฑุฌู ุงุฎุชูุงุฑ ุงููุญุงูุธุฉ ูุงูุฌุงูุนุฉ ุฃููุงู");
                return;
            }
            userAnswers["ุงููุญุงูุธุฉ"] = provinceSelect.options[provinceSelect.selectedIndex].text;
            userAnswers["ุงูุฌุงูุนุฉ"] = university;
            document.getElementById('university-screen').style.display = 'none';
            document.getElementById('question-screen').style.display = 'block';
            currentStep = 0;
            updateQuestionUI();
        };

        function updateQuestionUI() {
            const q = questions[currentStep];
            document.getElementById('question-text').innerText = q.text;
            document.getElementById('question-number').innerText = `ุงูุณุคุงู ${currentStep + 1}`;
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            currentSelectedOptions = []; // ุชุตุบูุฑ ุงููุงุฆูุฉ ุนูุฏ ูู ุณุคุงู ุฌุฏูุฏ
            document.getElementById('confirm-next-btn').style.display = 'none';

            q.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'opt-btn';
                btn.innerText = opt;
                btn.onclick = () => toggleOption(btn, opt);
                container.appendChild(btn);
            });

            const otherBtn = document.createElement('button');
            otherBtn.className = 'opt-btn other-btn';
            otherBtn.innerText = "ุฃุฎุฑู (ุงูุชุจ ุฅุฌุงุจุชู)";
            otherBtn.onclick = () => showOtherInput();
            container.appendChild(otherBtn);
        }

        function toggleOption(btn, opt) {
            if (btn.classList.contains('selected')) {
                btn.classList.remove('selected');
                currentSelectedOptions = currentSelectedOptions.filter(item => item !== opt);
            } else {
                btn.classList.add('selected');
                currentSelectedOptions.push(opt);
            }
            
            // ุฅุธูุงุฑ ุฒุฑ ุงูุชุฃููุฏ ุฅุฐุง ุชู ุงุฎุชูุงุฑ ุฎูุงุฑ ูุงุญุฏ ุนูู ุงูุฃูู
            document.getElementById('confirm-next-btn').style.display = currentSelectedOptions.length > 0 ? 'block' : 'none';
        }

        window.confirmAnswers = function() {
            if (currentSelectedOptions.length === 0) {
                alert("ูุฑุฌู ุงุฎุชูุงุฑ ุฎูุงุฑ ูุงุญุฏ ุนูู ุงูุฃูู");
                return;
            }
            userAnswers[currentStep] = currentSelectedOptions.join(" - ");
            nextQuestion();
        }

        function showOtherInput() {
            const container = document.getElementById('options-container');
            container.innerHTML = `
                <input type="text" id="custom-answer" placeholder="ุงูุชุจ ุฅุฌุงุจุชู ููุง..." class="custom-input">
                <button onclick="saveCustomAnswer()" style="background: #10b981; margin-top: 10px; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">ุชุฃููุฏ ุงูุฅุฌุงุจุฉ</button>
            `;
            document.getElementById('confirm-next-btn').style.display = 'none';
            document.getElementById('custom-answer').focus();
        }

        window.saveCustomAnswer = function() {
            const val = document.getElementById('custom-answer').value.trim();
            if (val === "") { alert("ูุฑุฌู ูุชุงุจุฉ ุฅุฌุงุจุฉ ุฃููุงู"); return; }
            // ุฏูุฌ ุงูุฅุฌุงุจุฉ ุงูููุชูุจุฉ ูุน ุงูุฎูุงุฑุงุช ุงููุฎุชุงุฑุฉ ุณุงุจูุงู ุฅู ูุฌุฏุช
            if (currentSelectedOptions.length > 0) {
                userAnswers[currentStep] = currentSelectedOptions.join(" - ") + " | ุฃุฎุฑู: " + val;
            } else {
                userAnswers[currentStep] = "ุฃุฎุฑู: " + val;
            }
            nextQuestion();
        };

        function nextQuestion() {
            currentStep++;
            if (currentStep < questions.length) {
                updateQuestionUI();
            } else {
                document.getElementById('question-screen').style.display = 'none';
                document.getElementById('suggestions-screen').style.display = 'block';
            }
        }

        window.goBack = function() {
            if (currentStep > 0) {
                currentStep--;
                updateQuestionUI();
            } else {
                document.getElementById('question-screen').style.display = 'none';
                document.getElementById('university-screen').style.display = 'block';
            }
        };

        window.goBackFromSuggestions = function() {
            document.getElementById('suggestions-screen').style.display = 'none';
            document.getElementById('question-screen').style.display = 'block';
            currentStep = questions.length - 1;
            updateQuestionUI();
        };

        window.showFinishScreen = function() {
            const suggestionText = document.getElementById('user-suggestion').value.trim();
            userAnswers["ุงูุงูุชุฑุงุญุงุช"] = suggestionText !== "" ? suggestionText : "ูุง ููุฌุฏ ุงูุชุฑุงุญุงุช";
            document.getElementById('suggestions-screen').style.display = 'none';
            document.getElementById('finish-screen').style.display = 'block';
        };

        window.showConfirm = function() {
            document.getElementById('initial-save-area').style.display = 'none';
            document.getElementById('confirm-area').style.display = 'block';
        };

        window.hideConfirm = function() {
            document.getElementById('confirm-area').style.display = 'none';
            document.getElementById('initial-save-area').style.display = 'block';
        };

        window.saveData = function() {
            const scriptURL = 'https://script.google.com/macros/s/AKfycbw4FrgH-ioPKB2lQdWcF3n0JTrm-lzMn7AiTLe9ewhFyqAS7GEsj4Jh9DnNWc8pbmsMVg/exec'; 
            
            const dataToSend = {
                province: userAnswers["ุงููุญุงูุธุฉ"],
                university: userAnswers["ุงูุฌุงูุนุฉ"],
                q1: userAnswers[0] || "", q2: userAnswers[1] || "", q3: userAnswers[2] || "",
                q4: userAnswers[3] || "", q5: userAnswers[4] || "", q6: userAnswers[5] || "",
                q7: userAnswers[6] || "", q8: userAnswers[7] || "", q9: userAnswers[8] || "",
                q10: userAnswers[9] || "",
                suggestions: userAnswers["ุงูุงูุชุฑุงุญุงุช"]
            };

            const saveBtn = document.querySelector('#confirm-area button');
            const originalText = saveBtn.innerText;
            saveBtn.innerText = "ุฌุงุฑู ุงูุญูุธ...";
            saveBtn.disabled = true;

            fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors',
                body: JSON.stringify(dataToSend)
            })
            .then(() => {
                alert("ุชู ุญูุธ ุจูุงูุงุชู ุจูุฌุงุญ ูู ุงูุฌุฏูู!");
                resetSurvey();
            })
            .catch(error => {
                console.error('Error!', error.message);
                alert("ุญุฏุซ ุฎุทุฃ ูู ุงูุงุชุตุงูุ ุฌุฑุจ ูุฑุฉ ุฃุฎุฑู.");
                saveBtn.innerText = originalText;
                saveBtn.disabled = false;
            });
        };

        window.resetSurvey = function() {
            currentStep = 0;
            userAnswers = {};
            currentSelectedOptions = [];
            document.getElementById('finish-screen').style.display = 'none';
            document.getElementById('welcome-screen').style.display = 'block';
            document.getElementById('confirm-area').style.display = 'none';
            document.getElementById('initial-save-area').style.display = 'block';
            document.getElementById('user-suggestion').value = ''; 
        };
    </script>
</body>
</html>
